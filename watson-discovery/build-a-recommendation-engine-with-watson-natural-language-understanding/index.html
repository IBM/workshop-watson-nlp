
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="IBM Developer">
      
      
        <link rel="canonical" href="https://ibm.github.io/workshop-watson-nlp/watson-discovery/build-a-recommendation-engine-with-watson-natural-language-understanding/">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>Build a recommendation engine with Watson Natural Language Understanding - Watson NLP Discovery Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback">
        <style>body,input{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"IBM Plex Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prerequisites" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://ibm.github.io/workshop-watson-nlp" title="Watson NLP Discovery Workshop" class="md-header-nav__button md-logo" aria-label="Watson NLP Discovery Workshop">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Watson NLP Discovery Workshop
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Build a recommendation engine with Watson Natural Language Understanding
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/ibm/workshop-watson-nlp/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    workshop-watson-nlp
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Welcome
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../create-an-app-to-perform-intelligent-searches-on-data/" class="md-tabs__link md-tabs__link--active">
        Workshop
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../pre-work/SETUP_CLI.md" class="md-tabs__link">
        Extra Material
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../resources/README.md" class="md-tabs__link">
        References
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ibm.github.io/workshop-watson-nlp" title="Watson NLP Discovery Workshop" class="md-nav__button md-logo" aria-label="Watson NLP Discovery Workshop">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Watson NLP Discovery Workshop
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ibm/workshop-watson-nlp/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    workshop-watson-nlp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
    
    <label class="md-nav__link" for="nav-1">
      Welcome
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Welcome" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Welcome
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      About the workshop
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../pre-work/GET_STARTED.md" class="md-nav__link">
      Create an IBM Cloud Account
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Workshop
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Workshop" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Workshop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../create-an-app-to-perform-intelligent-searches-on-data/" class="md-nav__link">
      Lab 1. Create an app to perform intelligent searches
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../analyze-and-answer-policy-questions-with-smart-document-understanding/" class="md-nav__link">
      Lab 2. Smart Document Understanding
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Lab 3. Custom Domain Language Understanding
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Lab 3. Custom Domain Language Understanding
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provision-a-watson-natural-language-understanding-instance" class="md-nav__link">
    Provision a Watson Natural Language Understanding instance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provision-a-watson-knowledge-studio-instance" class="md-nav__link">
    Provision a Watson Knowledge Studio instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estimated-time" class="md-nav__link">
    Estimated time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    Steps
  </a>
  
    <nav class="md-nav" aria-label="Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-entities-and-entity-subtypes" class="md-nav__link">
    Define entities and entity subtypes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-relation-types" class="md-nav__link">
    Create Relation Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collect-documents-that-describe-your-domain-language" class="md-nav__link">
    Collect documents that describe your domain language
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotate-documents" class="md-nav__link">
    Annotate documents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-a-machine-learning-model" class="md-nav__link">
    Generate a machine learning model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-model-to-watson-natural-language-understanding" class="md-nav__link">
    Deploy model to Watson Natural Language Understanding
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    
    <label class="md-nav__link" for="nav-3">
      Extra Material
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Extra Material" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Extra Material
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../pre-work/SETUP_CLI.md" class="md-nav__link">
      Setup OC CLI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    
    <label class="md-nav__link" for="nav-4">
      References
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="References" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../resources/README.md" class="md-nav__link">
      Additional resources
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../99-faq/README.md" class="md-nav__link">
      FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provision-a-watson-natural-language-understanding-instance" class="md-nav__link">
    Provision a Watson Natural Language Understanding instance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#provision-a-watson-knowledge-studio-instance" class="md-nav__link">
    Provision a Watson Knowledge Studio instance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estimated-time" class="md-nav__link">
    Estimated time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    Steps
  </a>
  
    <nav class="md-nav" aria-label="Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-entities-and-entity-subtypes" class="md-nav__link">
    Define entities and entity subtypes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-relation-types" class="md-nav__link">
    Create Relation Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collect-documents-that-describe-your-domain-language" class="md-nav__link">
    Collect documents that describe your domain language
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotate-documents" class="md-nav__link">
    Annotate documents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-a-machine-learning-model" class="md-nav__link">
    Generate a machine learning model
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-model-to-watson-natural-language-understanding" class="md-nav__link">
    Deploy model to Watson Natural Language Understanding
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm/workshop-watson-nlp/edit/master/docs/watson-discovery/build-a-recommendation-engine-with-watson-natural-language-understanding/index.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Lab 3. Custom Domain Language Understanding</h1>
                
                <p>IBM&reg; Watson&trade; Knowledge Studio is a service that lets you create a customized language analysis model for a specific domain. This is especially useful for specialized industries with complex languages such as medicine, law, and finance.</p>
<p>In this tutorial, learn how to use Watson Knowledge Studio to annotate reviews for auto repair facilities. After annotating the reviews, you can then train a machine learning model that can analyze the reviews. The model is able to determine what types of repairs were needed by the vehicle and how satisfied the customer was with the quality of work. By analyzing the reviews associated with a given auto repair shop, you can generate insights about that shop's overall performance to determine what types of repairs they're most (and least) skilled at.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>To follow this tutorial, you need an IBM Cloud account. If you don't have one, you can <a href="https://cloud.ibm.com/registration?cm_sp=ibmdev-_-developer-tutorials-_-cloudreg">create one</a>.</p>
<h3 id="provision-a-watson-natural-language-understanding-instance">Provision a Watson Natural Language Understanding instance<a class="headerlink" href="#provision-a-watson-natural-language-understanding-instance" title="Permanent link">&para;</a></h3>
<p>After you have an IBM Cloud account, navigate to the <a href="https://cloud.ibm.com?cm_sp=ibmdev-_-developer-tutorials-_-cloudreg">IBM Cloud console</a>.</p>
<ol>
<li>Click <strong>Catalog</strong>.</li>
<li>
<p>Search for <strong>Natural Language Understanding</strong>, and click the icon when it appears.</p>
<p><img alt="NLP catalog icon" src="images/find_nlu.png" /></p>
</li>
<li>
<p>Select a pricing plan for the  Watson Natural Language Understanding service, and click <strong>Create</strong>.</p>
<p><img alt="Selecting pricing plan" src="images/create_nlu.png" /></p>
</li>
</ol>
<p>After the service is provisioned, store the API key and URL. These credentials are needed later in the tutorial.</p>
<h3 id="provision-a-watson-knowledge-studio-instance">Provision a Watson Knowledge Studio instance<a class="headerlink" href="#provision-a-watson-knowledge-studio-instance" title="Permanent link">&para;</a></h3>
<p>To provision an IBM Watson Knowledge Studio instance:</p>
<ol>
<li>Click <strong>Catalog</strong>.</li>
<li>
<p>Search for <strong>Knowledge Studio</strong>, and click the icon the icon when it appears.</p>
<p><img alt="Watson Knowledge Studio icon" src="images/image1.png" /></p>
</li>
<li>
<p>Select a pricing plan ("Lite" is sufficient here), and then click <strong>Create</strong>.</p>
<p><img alt="Select pricing plan" src="images/image2.png" /></p>
</li>
<li>
<p>Click <strong>Launch Watson Knowledge Studio</strong> after the service is provisioned.</p>
<p><img alt="Launching Watsob Knowledge Studio" src="images/image3.png" /></p>
</li>
</ol>
<h2 id="estimated-time">Estimated time<a class="headerlink" href="#estimated-time" title="Permanent link">&para;</a></h2>
<p>It should take you approximately 60 minutes to complete the tutorial after you've completed the prerequisites.</p>
<h2 id="steps">Steps<a class="headerlink" href="#steps" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="define-entities-and-entity-subtypes">Define entity types and subtypes</a></li>
<li><a href="create-relation-types">Create "Relation Types"</a></li>
<li><a href="collect-documents-that-describe-your-domain-language">Collect documents that describe your domain language</a></li>
<li><a href="annotate-documents">Annotate Documents</a></li>
<li><a href="generate-a-machine-learning-model">Generate a Machine Learning Model</a></li>
<li><a href="deploy-model-to-natural-language-understanding-service">Deploy model to Natural Language Understanding service</a></li>
</ol>
<h3 id="define-entities-and-entity-subtypes">Define entities and entity subtypes<a class="headerlink" href="#define-entities-and-entity-subtypes" title="Permanent link">&para;</a></h3>
<p>Begin by creating Entity Types. An entity is a representation of an object or concept. In this case, you'll create entities related to auto repairs such as a <em>Mechanic</em>, <em>Vehicle</em>, and <em>Repair</em>. First, you'll create a <em>Repair</em> entity, which describes the problem that the vehicle was serviced for.</p>
<ol>
<li>
<p>Click <strong>Entity Types</strong> in the left menu.</p>
</li>
<li>
<p>Click <strong>Add Entity Type</strong>.</p>
<p><img alt="Adding an entity" src="images/image6.png" /></p>
</li>
<li>
<p>Label the new entity as a <em>Repair</em>.</p>
</li>
<li>
<p>Add subtypes, which let you further classify an entity instance. For example, a reference to an alternator or spark plug can be labeled as an <em>Electrical</em> subtype of the <em>Repair</em> entity.</p>
<p><img alt="Adding subtypes" src="images/create_entity.png" /></p>
</li>
</ol>
<p>Now that you understand how to create entities, you can upload a preconfigured list of entity types. Download the <a href="https://github.com/IBM/virtual-insurance-assistant/blob/master/data/wks/types-8c501370-8411-11ea-9a22-cf86d29dec48.json">JSON types</a>, then click <strong>Upload</strong>.</p>
<p><img alt="Uploading JSON file" src="images/upload_entity.png" /></p>
<p>After uploading and creating the entity types, click <strong>Save</strong>.</p>
<h3 id="create-relation-types">Create Relation Types<a class="headerlink" href="#create-relation-types" title="Permanent link">&para;</a></h3>
<p>Relation Types describe how two entities are associated. For example, if you have a <em>Vehicle</em>, <em>Customer</em>, and <em>Mechanic</em>, the vehicle might have an <em>OwnedBy</em> relation with the customer and a <em>RepairedBy</em> relation with the mechanic.</p>
<ol>
<li>
<p>Create relations by clicking <strong>Relation Types</strong> in the menu.</p>
</li>
<li>
<p>Click <strong>Add Relation Types</strong>.</p>
</li>
<li>
<p>Name the relation type, and list the valid entity pairs that can have that relation.</p>
<p>There should be a set of relation types already uploaded from the previous step. Examples in this case can be:</p>
<ul>
<li>RepairedBy (<em>Vehicle</em> can be repaired by a <em>Mechanic</em>)</li>
<li>OwnedBy (<em>Vehicle</em> can be owned by a <em>Driver</em>)</li>
<li>DamagedBy (<em>Vehicle</em> can be damaged by a <em>Driver</em> or <em>Mechanic</em>)</li>
</ul>
<p><img alt="Adding Relation Types" src="images/image8.png" /></p>
</li>
</ol>
<h3 id="collect-documents-that-describe-your-domain-language">Collect documents that describe your domain language<a class="headerlink" href="#collect-documents-that-describe-your-domain-language" title="Permanent link">&para;</a></h3>
<p>Collect files that contain text examples that describe automobile damage and repairs. These examples let Watson Knowledge Studio learn the relevant <em>domain language</em>, which consists of terms and phrases that are commonly used by auto mechanics. In this example, we use customer reviews that describe experiences with various mechanics.</p>
<p>We have included a set of pre-annotated synthetic reviews to get started, which you can <a href="https://github.com/IBM/virtual-insurance-assistant/blob/master/data/wks/corpus-e6e25540-9c54-11ea-b92e-afac3e68cacf.zip">download</a>.</p>
<p>If you want to train a data model with some actual survey data, you can use the <a href="https://www.kaggle.com/c/yelp-recruiting/data">Yelp data set</a>, which you can access subject to the Yelp Terms of Use. This data set has a JSON file that includes millions of reviews of auto mechanic shops around the United States. Each review must be placed into individual .txt files.</p>
<p>After collecting the documents, they'll need to be uploaded to Watson Knowledge Studio. Log in to your Watson Knowledge Studio instance, and click <strong>Documents</strong>.</p>
<ol>
<li>
<p>Click <strong>Upload Document Sets</strong>.</p>
<p><img alt="Uploading data sets" src="images/image4.png" /></p>
</li>
<li>
<p>Upload your documents by dragging them to the <strong>Add a Document Set</strong> section.</p>
<p><img alt="Adding a document set" src="images/upload_corpus.png" /></p>
</li>
</ol>
<h3 id="annotate-documents">Annotate documents<a class="headerlink" href="#annotate-documents" title="Permanent link">&para;</a></h3>
<p>After creating the Entity and Relation Types, you can add the annotation, which maps each document's words and phrases to your defined entities.</p>
<ol>
<li>
<p>Click <strong>Machine Learning Model</strong>, then <strong>Annotations</strong>.</p>
<p><img alt="Annotations window" src="images/image9.png" /></p>
</li>
<li>
<p>Locate the Document set that you uploaded earlier, and click <strong>Annotate</strong>.</p>
<p><img alt="Locating document set" src="images/image10.png" /></p>
</li>
<li>
<p>Begin annotating all mentions in the document that reference a defined Entity by selecting each relevant word or phrase.</p>
</li>
<li>
<p>Click the corresponding Entity Type in the menu on the right.</p>
<p>We apply the following annotations in the image.</p>
<ul>
<li><em>SUVs</em> and <em>Motorcycles</em> can be labeled as a <em>Vehicle</em> and sub entity <em>Type</em>.</li>
<li><em>Glass Repair</em> and <em>Body Work</em> can be labeled as the <em>Repair</em> entity and <em>Glass</em> / <em>Body</em> subtype.</li>
<li><em>Joe's Auto Repair</em>, <em>Joe</em>, <em>Lydia</em>, and <em>they</em> refer to the mechanics.</li>
</ul>
<p><img alt="Annotating text" src="images/annotate.png" /></p>
</li>
<li>
<p>Define the relationships between entities by clicking <strong>Relation</strong>, which is shown in black in the following image.</p>
<p>In this example, <em>My</em> is a reference to the customer or reviewer. <em>Car</em> is owned by the customer, so it is labeled as a <em>Vehicle</em> entity and has the <em>belongsTo</em> relation with the customer. The mention <em>suspension</em> has the <em>Repair</em> entity and has a <em>needsRepairType</em> relationship with the car.</p>
<p><img alt="Defining relations" src="images/relations.png" /></p>
</li>
<li>
<p>Add coreferences, which occur when there are multiple different mentions that reference the same entity. In this case, <em>Joe</em>, <em>his</em>, and <em>he</em> all refer to the same <em>Mechanic</em> entity. To bind them together, select <strong>Coreference</strong>, and click each reference. Then, double-click the last entity mention to apply the coreference.</p>
<p>After this is successfully applied, a small number should appear under each coreference.</p>
<p><img alt="Adding coreferences" src="images/coference.png" /></p>
</li>
</ol>
<h3 id="generate-a-machine-learning-model">Generate a machine learning model<a class="headerlink" href="#generate-a-machine-learning-model" title="Permanent link">&para;</a></h3>
<p>After annotating a few documents, you can train a machine learning model that annotates the remaining unlabeled documents. This model can also be exposed through an API, which we show in the next step.</p>
<ol>
<li>
<p>Create the model by selecting <strong>Performance</strong>.</p>
</li>
<li>
<p>Click <strong>Train and evaluate</strong>.</p>
<p><img alt="Performance dashboard" src="images/image14.png" /></p>
</li>
<li>
<p>Click <strong>Edit Settings</strong> if you would like to select specific document sets to train on, or adjust your Test, Training, and Blind training subsets.</p>
<p><img alt="Training subsets" src="images/image15.png" /></p>
</li>
<li>
<p>Confirm your training settings, and click <strong>Train &amp; Evaluate</strong>.</p>
<p><img alt="Training settings" src="images/image16.png" /></p>
</li>
</ol>
<p>After training is complete, you can deploy your custom machine learning model to the Watson Natural Language Understanding service. This deployment makes your custom machine learning model through an API.</p>
<ol>
<li>
<p>Click <strong>Versions</strong> to view your trained models, then click <strong>Deploy</strong>.</p>
<p><img alt="Versions dashboard" src="images/image17.png" /></p>
</li>
<li>
<p>Select <strong>Natural Language Understanding</strong>, and click <strong>Next</strong>.</p>
<p><img alt="Selecting Natural Language Understanding" src="images/image18.png" /></p>
</li>
<li>
<p>Select your Region, Resource Group, and Service Name, and click <strong>Deploy</strong>.</p>
</li>
</ol>
<p>After the deployment is finished, you should see a new entry in the Deployed Models list. Expand it to get your Model ID.</p>
<p><img alt="Deployed models window" src="images/image19.png" /></p>
<h3 id="deploy-model-to-watson-natural-language-understanding">Deploy model to Watson Natural Language Understanding<a class="headerlink" href="#deploy-model-to-watson-natural-language-understanding" title="Permanent link">&para;</a></h3>
<p>Now, you should be able to test the model by POSTing data to an API. To do so, you need the following credentials.</p>
<ul>
<li>The Natural Language Understanding API Key</li>
<li>The Natural Language Understanding URL</li>
<li>The Watson Knowledge Studio Deployed Model ID (taken from the end of the previous section)</li>
</ul>
<p>The Natural Language Understanding API Key and URL can be found by navigating to your Watson Natural Language Understanding instance page and looking in the Credentials section.</p>
<p><img alt="Credentials" src="images/nlu_creds.png" /></p>
<p>Create a .json file using the following code. In your file, replace the <code>model_id</code> with the deployment ID generated from Watson Knowledge Studio. Also, insert the following text in the <code>&lt;input text&gt;</code> section: <strong>My truck windshield was cracked, so I went to Joe's Auto shop and they replaced it for me. They did an excellent job. I would highly recommend them</strong>.</p>
<div class="highlight"><pre><span></span><code>{
  &quot;text&quot;: &quot;&lt;input_text&gt;&quot;,
  &quot;features&quot;: {
    &quot;entities&quot;: {
      &quot;model&quot;: &quot;&lt;model_id&gt;&quot;
    },
    &quot;keywords&quot;: {
      &quot;emotion&quot;: true,
      &quot;sentiment&quot;: true
    },
    &quot;emotion&quot;: {
        &quot;sentiment&quot;: true
    },
    &quot;categories&quot;: {
      &quot;sentiment&quot;: true
    },
    &quot;relations&quot;: {
      &quot;model&quot;: &quot;&lt;model_id&gt;&quot;
    },
    &quot;sentiment&quot;: {}
  }
}
</code></pre></div>
<p>Run a curl command to analyze the text with the generated machine learning model. Be sure to update the <code>nluApiKey</code> and <code>nluUrl</code> fields with your service credentials. Also, add the path to your .json file.</p>
<div class="highlight"><pre><span></span><code>curl -X POST \
  -u &quot;apikey&quot;:&quot;&lt;nluApiKey&gt; \  
  -H &quot;Content-Type: application/json&quot; \
  -d @&lt;path to json file&gt; \
  &quot;&lt;nluUrl&gt;/v1/analyze?version=2019-07-12&quot;
</code></pre></div>
<p>In the sentiment section, you see that the review was labeled as positive. And in the entities section, you'll be able to recognize which repairs were completed.</p>
<div class="highlight"><pre><span></span><code>&quot;sentiment&quot;: {
  &quot;document&quot;: {
    &quot;score&quot;: 0.952598,
    &quot;label&quot;: &quot;positive&quot;
  }
},
</code></pre></div>
<div class="highlight"><pre><span></span><code>&quot;entities&quot;: [
  {
    &quot;type&quot;: &quot;Repair&quot;,
    &quot;text&quot;: &quot;windshield&quot;,
    &quot;disambiguation&quot;: {
      &quot;subtype&quot;: [
        &quot;Glass&quot;
      ]
    },
    &quot;count&quot;: 1,
    &quot;confidence&quot;: 0.994622
  },
</code></pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../analyze-and-answer-policy-questions-with-smart-document-understanding/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Lab 2. Smart Document Understanding
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 IBM Developer
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ibm" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/ibmdeveloper" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/company/ibm/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/user/developerworks" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://dev.to/ibmdeveloper" target="_blank" rel="noopener" title="dev.to" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="../../assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>